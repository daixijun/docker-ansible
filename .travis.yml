language: bash

env:
  global:
    - DOCKER_IMAGE=daixijun1990/ansible
  matrix:
    - VERSION=2.5.15
    - VERSION=2.6.15
    - VERSION=2.7.9

services:
  - docker

before_script:
  - docker login -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD"

script:
  - docker build --build-arg version=$VERSION --tag $DOCKER_IMAGE:v$VERSION .
  - docker push $DOCKER_IMAGE:v$VERSION
